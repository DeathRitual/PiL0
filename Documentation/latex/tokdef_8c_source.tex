\hypertarget{tokdef_8c_source}{\subsection{/home/nirvash/\-Projects/\-Pi\-L0/tokdef.c}
}

\begin{DoxyCode}
00001 
00019 \textcolor{preprocessor}{#include "\hyperlink{tokdef_8h}{tokdef.h}"}
00020 \textcolor{preprocessor}{#include<stddef.h>}
00021 \textcolor{preprocessor}{#include<stdio.h>}
00022 \textcolor{preprocessor}{#include<stdlib.h>}
00023 \textcolor{preprocessor}{#include<string.h>}
00024 \textcolor{preprocessor}{#include<ctype.h>}
00025 \textcolor{preprocessor}{#ifndef tokdef\_C}
00026 \textcolor{preprocessor}{}
00027 \textcolor{comment}{/*}
00028 \textcolor{comment}{ * }
00029 \textcolor{comment}{ * Error Handling}
00030 \textcolor{comment}{ * }
00031 \textcolor{comment}{*/}
00032 
\hypertarget{tokdef_8c_source_l00037}{}\hyperlink{tokdef_8c_ac904322e9cd774d033d702016491a991}{00037} \textcolor{keyword}{static} \textcolor{keywordtype}{char} *\hyperlink{tokdef_8c_ac904322e9cd774d033d702016491a991}{err_msg}[] = \{
00038     \textcolor{stringliteral}{"Null-Pointer"}, \textcolor{stringliteral}{"Kein Speicher frei"},
00039     \textcolor{stringliteral}{"Liste ist leer"}
00040   \}; 
00041   
\hypertarget{tokdef_8c_source_l00045}{}\hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55}{00045} \textcolor{keyword}{enum} \hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55}{err_codes} \{
\hypertarget{tokdef_8c_source_l00046}{}\hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55a4fb873dc451927ef6a70af3a1e7f08bd}{00046}     \hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55a4fb873dc451927ef6a70af3a1e7f08bd}{NULL_POINTER}, \hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55afb88c5fa6e7d51074ec36bd4578e03a0}{ERR_MEMORY}, \hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55a60202b752d64be3e9634f160ce5dca7d}{EMPTY_LIST}
00047   \};
00048   
00049 
\hypertarget{tokdef_8c_source_l00055}{}\hyperlink{tokdef_8c_a8b4b6428a8bf1450cf23b6032dec56cf}{00055} \textcolor{keyword}{static} \textcolor{keywordtype}{void} \hyperlink{tokdef_8c_a8b4b6428a8bf1450cf23b6032dec56cf}{error}(\textcolor{keyword}{enum} \hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55}{err_codes} msg\_nr) \{
00056   fprintf(stderr, \textcolor{stringliteral}{"FEHLER(intlist): %s!\(\backslash\)n"}, \hyperlink{tokdef_8c_ac904322e9cd774d033d702016491a991}{err_msg}[msg\_nr]);
00057   exit(10);
00058 \}
00059 
00060 
00061 \textcolor{comment}{/*}
00062 \textcolor{comment}{ * }
00063 \textcolor{comment}{ * FIFO Implementation}
00064 \textcolor{comment}{ * }
00065 \textcolor{comment}{ */}
00066 
\hypertarget{tokdef_8c_source_l00071}{}\hyperlink{tokdef_8c_ac89b2e52a88dfd9ed05bbacf90176fcd}{00071} \textcolor{keyword}{struct }\hyperlink{tokdef_8h_struct__tag__list}{_tag_list} *\hyperlink{tokdef_8c_ac89b2e52a88dfd9ed05bbacf90176fcd}{head};
00072 
\hypertarget{tokdef_8c_source_l00079}{}\hyperlink{tokdef_8c_aeaf25962d905093a69389e62796e237b}{00079} \textcolor{keywordtype}{void} \hyperlink{tokdef_8h_ac9f8b5800165d01c9c53895ab3027f5d}{l_init}(list *l) \{
00080   \textcolor{keywordflow}{if} (l == NULL) \hyperlink{tokdef_8c_a8b4b6428a8bf1450cf23b6032dec56cf}{error}(\hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55a4fb873dc451927ef6a70af3a1e7f08bd}{NULL_POINTER});
00081   *l = NULL; 
00082 \}
00083 
\hypertarget{tokdef_8c_source_l00090}{}\hyperlink{tokdef_8c_a6b9833eb6c0963b6d2e4b76d7e460caa}{00090} \textcolor{keywordtype}{int} \hyperlink{tokdef_8h_ad38fb956f3e8b88088d0c3dbd9b0b1cd}{l_IsEmpty}(list l) \{
00091   \textcolor{keywordflow}{return} l == NULL;
00092 \} 
00093 
\hypertarget{tokdef_8c_source_l00102}{}\hyperlink{tokdef_8c_a46cdfdb54ba6b79debb3745f650bcdbe}{00102} \textcolor{keywordtype}{void} \hyperlink{tokdef_8h_a81ffeff3bff153b2a5e8576bad3c1145}{l_append}(list *l, \textcolor{keywordtype}{char} *t, \textcolor{keywordtype}{int} *n) \{
00103   \textcolor{keywordflow}{if} (l == NULL) \hyperlink{tokdef_8c_a8b4b6428a8bf1450cf23b6032dec56cf}{error}(\hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55a4fb873dc451927ef6a70af3a1e7f08bd}{NULL_POINTER});
00104   \textcolor{keyword}{struct }\hyperlink{tokdef_8h_struct__tag__list}{_tag_list} *el; 
00105   \textcolor{keywordflow}{if} ((el = malloc(\textcolor{keyword}{sizeof}(list))) == NULL) \hyperlink{tokdef_8c_a8b4b6428a8bf1450cf23b6032dec56cf}{error}(\hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55afb88c5fa6e7d51074ec36bd4578e03a0}{ERR_MEMORY});
00106   \textcolor{keywordflow}{if} (strlen(t) == 1) \{
00107     el->token.t = *t;
00108     el->\hyperlink{tokdef_8h_a1b949e00a2c76f6830b80942c1d65341}{type} = \textcolor{charliteral}{'t'};
00109   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (isdigit(*t) > 0) \{
00110     el->number.n = atoi(t);
00111     el->number.ID = *n;
00112     el->\hyperlink{tokdef_8h_a1b949e00a2c76f6830b80942c1d65341}{type} = \textcolor{charliteral}{'n'};
00113   \} \textcolor{keywordflow}{else} \{
00114     strcpy(el->word.w, t);
00115     el->word.ID = *n;
00116     el->\hyperlink{tokdef_8h_a1b949e00a2c76f6830b80942c1d65341}{type} = \textcolor{charliteral}{'w'};
00117   \}
00118   el->\hyperlink{tokdef_8h_a3778a8980f4cc9236d8288e5e364b9d3}{next} = *l;
00119   el->\hyperlink{tokdef_8h_aff2d3980f345bfd4ed08d44550f481bf}{previous} = NULL;
00120   \textcolor{keywordflow}{if} (!\hyperlink{tokdef_8h_ad38fb956f3e8b88088d0c3dbd9b0b1cd}{l_IsEmpty}(*l)) (*l)->\hyperlink{tokdef_8h_aff2d3980f345bfd4ed08d44550f481bf}{previous} = el;
00121   \textcolor{keywordflow}{if} (\hyperlink{tokdef_8h_ad38fb956f3e8b88088d0c3dbd9b0b1cd}{l_IsEmpty}(*l)) head = el;
00122   *l = el;
00123 \}
00124 
\hypertarget{tokdef_8c_source_l00131}{}\hyperlink{tokdef_8c_a597a6fc15d83dfb2d062ac6ca1039c06}{00131} \textcolor{keywordtype}{void} \hyperlink{tokdef_8h_a9a72d95129580ef11dc9778edb80004f}{l_remove}(list *l) \{
00132   \textcolor{keywordflow}{if} (l == NULL) \hyperlink{tokdef_8c_a8b4b6428a8bf1450cf23b6032dec56cf}{error}(\hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55a4fb873dc451927ef6a70af3a1e7f08bd}{NULL_POINTER});
00133   \textcolor{keywordflow}{if} (\hyperlink{tokdef_8h_ad38fb956f3e8b88088d0c3dbd9b0b1cd}{l_IsEmpty}(*l)) \hyperlink{tokdef_8c_a8b4b6428a8bf1450cf23b6032dec56cf}{error}(\hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55a60202b752d64be3e9634f160ce5dca7d}{EMPTY_LIST});
00134   \textcolor{keywordflow}{if} (head == *l) \{
00135     free(head);
00136     *l = NULL;
00137   \} \textcolor{keywordflow}{else} \{
00138   \textcolor{keyword}{struct }\hyperlink{tokdef_8h_struct__tag__list}{_tag_list} *ptr; 
00139   ptr = head->\hyperlink{tokdef_8h_aff2d3980f345bfd4ed08d44550f481bf}{previous};
00140   ptr->\hyperlink{tokdef_8h_a3778a8980f4cc9236d8288e5e364b9d3}{next} = NULL;
00141   head->\hyperlink{tokdef_8h_aff2d3980f345bfd4ed08d44550f481bf}{previous} = NULL;
00142   free(head);
00143   head = ptr;
00144   \}
00145 \}
00146 
\hypertarget{tokdef_8c_source_l00153}{}\hyperlink{tokdef_8c_a662de1b392ef548996d646fdac76fdf4}{00153} list \hyperlink{tokdef_8h_aa04f7ac992f12dbdcc80fdf4c624f7e9}{l_top}(list l) \{
00154   \textcolor{keywordflow}{if} (\hyperlink{tokdef_8h_ad38fb956f3e8b88088d0c3dbd9b0b1cd}{l_IsEmpty}(l)) \hyperlink{tokdef_8c_a8b4b6428a8bf1450cf23b6032dec56cf}{error}(\hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55a4fb873dc451927ef6a70af3a1e7f08bd}{NULL_POINTER});
00155   \textcolor{keywordflow}{return} \hyperlink{tokdef_8c_ac89b2e52a88dfd9ed05bbacf90176fcd}{head};
00156 \}
00157 
\hypertarget{tokdef_8c_source_l00164}{}\hyperlink{tokdef_8c_a3e647acbc5d046872adef10908ea44b4}{00164} list \hyperlink{tokdef_8h_a5a84ca70ef422afe2fbb8d4472f55e15}{l_last}(list l) \{
00165   \textcolor{keywordflow}{if} (\hyperlink{tokdef_8h_ad38fb956f3e8b88088d0c3dbd9b0b1cd}{l_IsEmpty}(l)) \hyperlink{tokdef_8c_a8b4b6428a8bf1450cf23b6032dec56cf}{error}(\hyperlink{tokdef_8c_ad7109e2dccd18353c3bdd5f55ad94b55a4fb873dc451927ef6a70af3a1e7f08bd}{NULL_POINTER});
00166   \textcolor{keywordflow}{return} l;
00167 \}
00168 
00169 \textcolor{comment}{/*}
00170 \textcolor{comment}{ * }
00171 \textcolor{comment}{ * keyword definition}
00172 \textcolor{comment}{ * }
00173 \textcolor{comment}{ */}
00174 
00175 
00176 
\hypertarget{tokdef_8c_source_l00183}{}\hyperlink{tokdef_8c_a3033e03f16b6d2620a2e39b45718f5b4}{00183} \textcolor{keyword}{enum} \hyperlink{tokdef_8c_a3033e03f16b6d2620a2e39b45718f5b4}{special_IDs} \{
\hypertarget{tokdef_8c_source_l00184}{}\hyperlink{tokdef_8c_a3033e03f16b6d2620a2e39b45718f5b4a17897512ed7598aeb5912e3d45bf000d}{00184}   \hyperlink{tokdef_8c_a3033e03f16b6d2620a2e39b45718f5b4a84f8ae2490f9e4bd2321fd21f4b0e807}{IDENTIFIER} = 300, \hyperlink{tokdef_8c_a3033e03f16b6d2620a2e39b45718f5b4a17897512ed7598aeb5912e3d45bf000d}{NUM}
00185 \};
00186 
00187 
\hypertarget{tokdef_8c_source_l00193}{}\hyperlink{tokdef_8c_a378b0ae598a7cfd7eb28be463d4cc909}{00193} \textcolor{keyword}{static} \textcolor{keywordtype}{char} *\hyperlink{tokdef_8c_a378b0ae598a7cfd7eb28be463d4cc909}{keywords}[] = \{
00194   \textcolor{stringliteral}{"BEGIN"}, \textcolor{stringliteral}{"CALL"}, \textcolor{stringliteral}{"CONST"}, \textcolor{stringliteral}{"DO"}, \textcolor{stringliteral}{"END"}, \textcolor{stringliteral}{"IF"}, \textcolor{stringliteral}{"ODD"}, \textcolor{stringliteral}{"PRINT"}, \textcolor{stringliteral}{"PROCEDURE"},
00195   \textcolor{stringliteral}{"READ"}, \textcolor{stringliteral}{"THEN"}, \textcolor{stringliteral}{"VAR"}, \textcolor{stringliteral}{"WHILE"}, \textcolor{stringliteral}{"PASS"}, \textcolor{stringliteral}{"=="}, \textcolor{stringliteral}{">="}, \textcolor{stringliteral}{"<="}, \textcolor{stringliteral}{"!="}, NULL
00196 \};
00197 
00198 
\hypertarget{tokdef_8c_source_l00208}{}\hyperlink{tokdef_8c_a9670ac79a4525a9152a28835404e2470}{00208} \textcolor{keywordtype}{int} \hyperlink{tokdef_8h_a3c9e5c09d162b2bfeaddb5e9390ce41b}{get_keyNUM}(\hyperlink{tokdef_8h_structkeyword}{keyword} *k, \textcolor{keywordtype}{char} *s) \{
00209   \textcolor{keywordtype}{int} i = 0;
00210   \textcolor{keywordflow}{for} (i = 0; \hyperlink{tokdef_8c_a378b0ae598a7cfd7eb28be463d4cc909}{keywords}[i] != NULL; i++) 
00211     \textcolor{keywordflow}{if} (strcmp(k[i].w, s) == 0) \textcolor{keywordflow}{return} i;
00212   \textcolor{keywordflow}{return} -1;
00213 \}
00214 
\hypertarget{tokdef_8c_source_l00220}{}\hyperlink{tokdef_8c_a6b0f05b95e21ab606b1aa2b573d0ed31}{00220} \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{tokdef_8c_a6b0f05b95e21ab606b1aa2b573d0ed31}{get_keySize}() \{
00221   \textcolor{keywordtype}{int} i = 1;
00222   \textcolor{keywordflow}{while} (\hyperlink{tokdef_8c_a378b0ae598a7cfd7eb28be463d4cc909}{keywords}[i] != NULL)
00223     i++;
00224   \textcolor{keywordflow}{return} i;
00225 \}
00226 
\hypertarget{tokdef_8c_source_l00232}{}\hyperlink{tokdef_8c_a7f47851ed6277df979bcf14757dac244}{00232} \hyperlink{tokdef_8h_structkeyword}{keyword} *\hyperlink{tokdef_8h_a2dad3191a25934603cb3427980b3505b}{init_ReservedKeys}() \{
00233   \hyperlink{tokdef_8h_structkeyword}{keyword} *resKeys = malloc(\textcolor{keyword}{sizeof} *resKeys * \hyperlink{tokdef_8c_a6b0f05b95e21ab606b1aa2b573d0ed31}{get_keySize}());
00234   \textcolor{keywordtype}{int} i;
00235   \textcolor{keywordflow}{for} (i = 0; \hyperlink{tokdef_8c_a378b0ae598a7cfd7eb28be463d4cc909}{keywords}[i] != NULL; i++) \{
00236     strcpy(resKeys[i].w,\hyperlink{tokdef_8c_a378b0ae598a7cfd7eb28be463d4cc909}{keywords}[i]);
00237     resKeys[i].\hyperlink{tokdef_8h_a79da3556d7a0b19c9d1ce39e9d4a0bc7}{ID} = 256 + i;
00238   \}
00239   \textcolor{keywordflow}{return} resKeys;
00240 \}
00241 
00242 
00243 \textcolor{preprocessor}{#endif}
\end{DoxyCode}
